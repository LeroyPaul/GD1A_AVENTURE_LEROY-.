<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8" /><title>The Legend of Canard : a Canard to the Past</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.51.0/dist/phaser.js">
    </script>

    <style type="text/css"> body 
    
        { margin: 0; 
        }
        
    
    </style>
</head>
<body>
    <script type="text/javascript">


class scene1 extends Phaser.Scene{
    constructor(){
        super("scene 1");
    }



preload(){

    this.load.spritesheet('marcheDroite','assets/anim canard marche droite.png',{ frameWidth: 32, frameHeight: 32 });
    this.load.spritesheet('marcheGauche','assets/anim canard marche gauche.png',{ frameWidth: 32, frameHeight: 32 });
    this.load.spritesheet('marcheArriere','assets/anim canard marche arrière.png',{ frameWidth: 32, frameHeight: 35 });
    this.load.spritesheet('marcheAvant','assets/anim canard marche avant.png',{ frameWidth: 32, frameHeight: 35 });
    //this.load.spritesheet('bougePasAvant','assets/anim canard bouge pas avant.png',{ frameWidth: 32, frameHeight: 32 });
    //this.load.image('image',"assets/freddo l'escargot.");

}

create(){

this.player = this.physics.add.sprite(100,100,"marcheDroite");

//this.cameras.main.zoom = 2;
//this.cameras.main.startFollow(player);

this.anims.create({
            key: 'animMarcheDroite',
            frames: this.anims.generateFrameNumbers('marcheDroite', {start:0,end:5}),
            frameRate: 8,
            repeat: -1
        });

this.anims.create({
            key: 'animMarcheGauche',
            frames: this.anims.generateFrameNumbers('marcheGauche', {start:0,end:5}),
            frameRate: 8,
            repeat: -1
        });

this.anims.create({
            key: 'animMarcheArriere',
            frames: this.anims.generateFrameNumbers('marcheArriere', {start:0,end:5}),
            frameRate: 8,
            repeat: -1
        });

this.anims.create({
            key: 'animMarcheAvant',
            frames: this.anims.generateFrameNumbers('marcheAvant', {start:0,end:5}),
            frameRate: 8,
            repeat: -1
        });

/*this.anims.create({
            key: 'animBougePasAvant',
            frames: this.anims.generateFrameNumbers('bougePasAvant', {start:0,end:7}),
            frameRate: 8,
            repeat: -1
        });
        */


        this.cursors = this.input.keyboard.createCursorKeys();
        this.keys = this.input.keyboard.addKeys({
            q:  Phaser.Input.Keyboard.KeyCodes.Q,
            d:  Phaser.Input.Keyboard.KeyCodes.D,
            z:  Phaser.Input.Keyboard.KeyCodes.Z,
            s:  Phaser.Input.Keyboard.KeyCodes.S,
        });


}


update(){
//Déplacement vertical
if (this.cursors.up.isDown){
            if (this.cursors.down.isDown) {
                this.player.setVelocityY(0);
            }
            else {
                if (this.player.body.velocity.x != 0) {
                    this.player.setVelocityY(-200);
                } else {
                    this.player.setVelocityY(-300);
                }
            }
        }
        else if (this.cursors.down.isDown){
            if (this.player.body.velocity.x != 0) {
                    this.player.setVelocityY(200);
                } else {
                    this.player.setVelocityY(300);
                }
        }
        else {this.player.setVelocityY(0);}
        //Déplacement horizontal
        if (this.cursors.left.isDown){
            if (this.cursors.right.isDown) {
                this.player.setVelocityX(0);
            }
            else {
                if (this.player.body.velocity.y != 0) {
                    this.player.setVelocityX(-200);
                } else {
                    this.player.setVelocityX(-300);
                }
            }
        }
        else if (this.cursors.right.isDown){
            if (this.player.body.velocity.y != 0) {
                    this.player.setVelocityX(200);
                } else {
                    this.player.setVelocityX(300);
                }
        }
        else {this.player.setVelocityX(0);}

    }
};



    var config = {
        type: Phaser.AUTO,
        width: 960, height: 540,
        physics: {
        default: 'arcade',
        arcade: {
        debug: false
        }},
        scene: [scene1]
        };
        new Phaser.Game(config);


</script>
</body>
</html>